---
title: peerdb
slug: peerdb
type: input
status: experimental
categories: ["Services"]
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/<provider>.
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::caution EXPERIMENTAL
This component is experimental and therefore subject to change or removal outside of major version releases.
:::
Reads from a Postgres DB using CDC (Change Data Capture) with pglogrepl.

```yml
# Config fields, showing default values
input:
  label: ""
  peerdb:
    host: localhost # No default (required)
    port: 5432 # No default (required)
    user: postgres # No default (required)
    password: password # No default (required)
    database: mydb # No default (required)
    replication_slot: benthos_slot # No default (required)
    publication: benthos_pub # No default (required)
    tables: [] # No default (required)
    batch_size: 100
    auto_replay_nacks: true
    idle_timeout_seconds: 5
    cache: "" # No default (required)
    cache_key: last_committed_lsn_unique
```

Connects to a Postgres database and replicates changes from the specified tables using logical replication.

## Fields

### `host`

Postgres host to connect to.


Type: `string`  

```yml
# Examples

host: localhost
```

### `port`

Postgres port to connect to.


Type: `int`  

```yml
# Examples

port: 5432
```

### `user`

Postgres user.


Type: `string`  

```yml
# Examples

user: postgres
```

### `password`

Postgres password.


Type: `string`  

```yml
# Examples

password: password
```

### `database`

Postgres database name.


Type: `string`  

```yml
# Examples

database: mydb
```

### `replication_slot`

Replication slot name.


Type: `string`  

```yml
# Examples

replication_slot: benthos_slot
```

### `publication`

Publication name.


Type: `string`  

```yml
# Examples

publication: benthos_pub
```

### `tables`

List of schema-qualified tables to replicate, in the format of 'schema.table'.


Type: `array`  

```yml
# Examples

tables:
  - public.users
  - myschema.orders
```

### `batch_size`

Batch size.


Type: `int`  
Default: `100`  

```yml
# Examples

batch_size: 100
```

### `auto_replay_nacks`

Whether messages that are rejected (nacked) at the output level should be automatically replayed indefinitely, eventually resulting in back pressure if the cause of the rejections is persistent. If set to `false` these messages will instead be deleted. Disabling auto replays can greatly improve memory efficiency of high throughput streams as the original shape of the data can be discarded immediately upon consumption and mutation.


Type: `bool`  
Default: `true`  

### `idle_timeout_seconds`

Idle timeout in seconds. If no messages are received within this duration, the current batch will be returned.


Type: `int`  
Default: `5`  

### `cache`

A cache resource to use for persisting the last committed source LSN.


Type: `string`  

### `cache_key`

The key identifier used when storing the last committed source LSN.


Type: `string`  
Default: `"last_committed_lsn_unique"`  


