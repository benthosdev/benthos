---
title: azure_cosmosdb
type: output
status: experimental
categories: ["Azure"]
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the contents of:
     lib/output/azure_cosmosdb.go
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::caution EXPERIMENTAL
This component is experimental and therefore subject to change or removal outside of major version releases.
:::
Publishes messages as JSON documents into Azure CosmosDB.

Introduced in version 4.10.0.


<Tabs defaultValue="common" values={[
  { label: 'Common', value: 'common', },
  { label: 'Advanced', value: 'advanced', },
]}>

<TabItem value="common">

```yml
# Common config fields, showing default values
output:
  label: ""
  azure_cosmosdb:
    endpoint: ""
    account_key: ""
    database_id: ""
    container_id: ""
    partition_key: ""
    partition_key_type: string
    operation: Create
    item_id: ""
    batching:
      count: 0
      byte_size: 0
      period: ""
      check: ""
    max_in_flight: 1
```

</TabItem>
<TabItem value="advanced">

```yml
# All config fields, showing default values
output:
  label: ""
  azure_cosmosdb:
    endpoint: ""
    account_key: ""
    database_id: ""
    container_id: ""
    partition_key: ""
    partition_key_type: string
    operation: Create
    item_id: ""
    batching:
      count: 0
      byte_size: 0
      period: ""
      check: ""
      processors: []
    max_in_flight: 1
```

</TabItem>
</Tabs>

When creating, replacing or upserting documents, each must have the `id` property (case-sensitive) set. It is the unique name that identifies the document, that is, no two documents share the same `id` within a logical partition. Partition and `id` uniquely identifies an item in the database. The `id` field must not exceed 255 characters. More details can be found [here](https://learn.microsoft.com/en-us/rest/api/cosmos-db/documents).

## Fields

### `endpoint`

CosmosDB endpoint.


Type: `string`  

```yml
# Examples

endpoint: https://localhost:8081
```

### `account_key`

Account key.


Type: `string`  

```yml
# Examples

account_key: C2y6yDjf5/R+ob0N8A7Cgv30VRDJIWEHLM+4QDU5DE2nQ9nDuVTqobD4b8mGGyPMbIZnqyMsEcaGQy67XIw/Jw==
```

### `database_id`

Database ID.


Type: `string`  

```yml
# Examples

database_id: TestDB
```

### `container_id`

Container ID.


Type: `string`  

```yml
# Examples

container_id: TestContainer
```

### `partition_key`

Partition key.
This field supports [interpolation functions](/docs/configuration/interpolation#bloblang-queries).


Type: `string`  

```yml
# Examples

partition_key: ${! json("foobar") }
```

### `partition_key_type`

Partition key type.


Type: `string`  
Default: `"string"`  

| Option | Summary |
|---|---|
| `bool` | partition_key contains a boolean. |
| `number` | partition_key contains a number. |
| `string` | partition_key contains a string. |


### `operation`

Operation.


Type: `string`  
Default: `"Create"`  

| Option | Summary |
|---|---|
| `Create` | Create operation. |
| `Delete` | Delete operation. |
| `Replace` | Replace operation. |
| `Upsert` | Upsert operation. |


### `item_id`

ID of item to replace or delete. Only used by the Replace and Delete operations
This field supports [interpolation functions](/docs/configuration/interpolation#bloblang-queries).


Type: `string`  

```yml
# Examples

item_id: 115a33c7-e7b3-44af-aea5-30a3fe1fb69b

item_id: ${! json("foobar") }
```

### `batching`

Allows you to configure a [batching policy](/docs/configuration/batching).


Type: `object`  

```yml
# Examples

batching:
  byte_size: 5000
  count: 0
  period: 1s

batching:
  count: 10
  period: 1s

batching:
  check: this.contains("END BATCH")
  count: 0
  period: 1m
```

### `batching.count`

A number of messages at which the batch should be flushed. If `0` disables count based batching.


Type: `int`  
Default: `0`  

### `batching.byte_size`

An amount of bytes at which the batch should be flushed. If `0` disables size based batching.


Type: `int`  
Default: `0`  

### `batching.period`

A period in which an incomplete batch should be flushed regardless of its size.


Type: `string`  
Default: `""`  

```yml
# Examples

period: 1s

period: 1m

period: 500ms
```

### `batching.check`

A [Bloblang query](/docs/guides/bloblang/about/) that should return a boolean value indicating whether a message should end a batch.


Type: `string`  
Default: `""`  

```yml
# Examples

check: this.type == "end_of_transaction"
```

### `batching.processors`

A list of [processors](/docs/components/processors/about) to apply to a batch as it is flushed. This allows you to aggregate and archive the batch however you see fit. Please note that all resulting messages are flushed as a single batch, therefore splitting the batch into smaller batches using these processors is a no-op.


Type: `array`  

```yml
# Examples

processors:
  - archive:
      format: concatenate

processors:
  - archive:
      format: lines

processors:
  - archive:
      format: json_array
```

### `max_in_flight`

The maximum number of parallel message batches to have in flight at any given time.


Type: `int`  
Default: `1`  


