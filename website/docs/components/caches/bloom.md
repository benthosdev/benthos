---
title: bloom
type: cache
status: beta
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the corresponding source file under internal/impl/<provider>.
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

:::caution BETA
This component is mostly stable but breaking changes could still be made outside of major version releases if a fundamental problem with the component is found.
:::
Stores keys in a bloom in-memory filter, useful for deduplication. This cache is therefore reset every time the service restarts.

```yml
# Config fields, showing default values
label: ""
bloom:
  cap: 10000
  fp: 0.01
  init_values: []
```

This provides the bloom package which implements a fixed-size thread safe filter.

A Bloom filter is a concise/compressed representation of a set, where the main requirement is to make membership queries; i.e., whether an item is a member of a set. A Bloom filter will always correctly report the presence of an element in the set when the element is indeed present. A Bloom filter can use much less storage than the original set, but it allows for some 'false positives': it may sometimes report that an element is in the set whereas it is not.

When you construct, you need to know how many elements you have (the desired capacity), and what is the desired false positive rate you are willing to tolerate. A common false-positive rate is 1%. The lower the false-positive rate, the more memory you are going to require. Similarly, the higher the capacity, the more memory you will use.

It uses the package [`bloomfilter`](github.com/bits-and-blooms/bloom/v3)

The field init_values can be used to pre-populate the memory cache with any number of keys:

```yml
cache_resources:
  - label: foocache
    bloom:
      cap: 1024
      init_values:
        - foo
        - bar
```

These values can be overridden during execution.

## Fields

### `cap`

The cache maximum capacity (number of entries)


Type: `int`  
Default: `10000`  

### `fp`

false positive rate. 1% is 0.01


Type: `float`  
Default: `0.01`  

### `init_values`

A table of keys that should be present in the cache on initialization. This can be used to create static lookup tables.


Type: `array`  
Default: `[]`  

```yml
# Examples

init_values:
  - Nickelback
  - Spice Girls
  - The Human League
```

This component implements all cache operations except *delete*, however it does not store any value, only the keys.

The main intent is to be used on deduplication.

When fetch a key from this case, if the key exists, we return a fixed string`t`.

